<!DOCTYPE html>
<html lang="en">
<head>
    <title>Messenger Automation</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" href="https://i.imgur.com/BNKq0fl.jpeg" type="image/jpeg" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;600&display=swap" rel="stylesheet" />
    <style>
        /* Matrix canvas fills whole background */
        #matrix {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1; /* Behind all content */
            background-color: #261000; /* dark orange fallback background */
        }

        /* Make sure container is above the matrix background */
        .container {
            position: relative;
            padding: 1.5rem;
            z-index: 1;
            max-width: 700px;
            margin: 0 auto;
        }

        /* Your original styles below */
        body {
            margin: 0;
            background-color: #261000;
            color: #fff5e6;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
        }

        .header {
            position: relative;
            text-align: center;
            padding-bottom: 0.5rem;
        }

        .banner {
            width: 100%;
            height: 150px;
            object-fit: cover;
            border-radius: 8px;
            border: 2px solid #ff8c00;
        }

        .profile-pic {
            position: absolute;
            bottom: -30px;
            left: 15px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            border: 2px solid #ff8c00;
            box-shadow: 0 0 8px rgba(255, 140, 0, 0.5);
        }

        .profile-container {
            padding-top: 40px;
            padding-left: 15px;
        }

        .profile-name {
            color: #ffaa33;
            font-size: 1.3rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            animation: textFloat 1s ease-out forwards, scrollHorizontal 3s ease-in-out infinite alternate;
            opacity: 0;
            animation-delay: 0.1s;
        }

        .verified-icon {
            margin-left: 5px;
            color: #ffaa33;
            font-size: 0.9rem;
        }

        .github-link {
            color: #ffaa33;
            text-decoration: none;
            font-size: 0.8rem;
            display: inline-block;
            margin: 3px 0 10px;
            animation: textFloat 1s ease-out forwards, scrollHorizontal 3s ease-in-out infinite alternate;
            opacity: 0;
            animation-delay: 0.3s;
        }

        .warning {
            color: #ffcc80;
            font-size: 0.8rem;
            max-width: 90%;
            animation: textFloat 1s ease-out forwards, scrollHorizontal 3s ease-in-out infinite alternate;
            opacity: 0;
            animation-delay: 0.5s;
            background-color: rgba(255, 140, 0, 0.2);
            padding: 8px;
            border-radius: 6px;
            border-left: 2px solid #ffaa33;
            display: flex;
            align-items: flex-start;
        }

        .warning-icon {
            margin-right: 8px;
            color: #ffaa33;
            font-size: 1rem;
        }

        .button-container {
            display: flex;
            justify-content: center;
            margin: 0.8rem 0;
            gap: 0.8rem;
        }

        .btn {
            background-color: #ff8c00;
            border: none;
            padding: 8px 16px;
            color: white;
            border-radius: 6px;
            font-weight: bold;
            cursor: pointer;
            animation: textFloat 1s ease-out forwards;
            opacity: 0;
            animation-delay: 1.3s;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            font-size: 0.85rem;
        }

        .btn:hover {
            background-color: #ffaa33;
            transform: translateY(-2px);
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);
        }

        .btn-secondary {
            background-color: #fff5e6;
            color: #261000;
            animation: textFloat 1s ease-out forwards;
            opacity: 0;
            animation-delay: 1.3s;
        }

        textarea,
        input {
            width: 100%;
            margin: 0.8rem 0;
            padding: 8px;
            border-radius: 6px;
            border: none;
            background-color: #3a1c00;
            color: #fff;
            resize: none;
            box-sizing: border-box;
            font-size: 0.85rem;
        }

        .input-with-icon {
            position: relative;
        }

        .input-icon {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: #ffaa33;
            font-size: 0.9rem;
        }

        .subtitle {
            font-size: 1.1rem;
            font-weight: 600;
            margin-top: 1.5rem;
            animation: textFloat 1s ease-out forwards, scrollHorizontal 3s ease-in-out infinite alternate;
            opacity: 0;
            animation-delay: 0.7s;
            color: #ffaa33;
            border-bottom: 1px solid #ff8c00;
            padding-bottom: 4px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .terms {
            font-size: 0.8rem;
            margin-top: 0.8rem;
            color: #ffcc80;
            animation: textFloat 1s ease-out forwards, scrollHorizontal 3s ease-in-out infinite alternate;
            opacity: 0;
            animation-delay: 0.9s;
        }

        .submit-btn {
            background-color: #ffaa33;
            padding: 8px 24px;
            font-weight: bold;
            margin-top: 0.8rem;
            animation: textFloat 1s ease-out forwards;
            opacity: 0;
            animation-delay: 1.3s;
            display: flex;
            align-items: center;
            gap: 6px;
            margin-left: auto;
            margin-right: auto;
            font-size: 0.85rem;
        }

        .footer {
            text-align: center;
            padding: 0.8rem;
            color: #ffcc80;
            font-size: 0.75rem;
            animation: textFloat 1s ease-out forwards, scrollHorizontal 3s ease-in-out infinite alternate;
            opacity: 0;
            animation-delay: 1.1s;
            margin-top: 1.5rem;
            border-top: 1px solid #ff8c00;
            display: flex;
            justify-content: center;
            gap: 20px;
        }

        .footer-item {
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .terms-check {
            display: flex;
            align-items: center;
            margin-top: 0.8rem;
            gap: 6px;
            font-size: 0.85rem;
        }

        /* Animations */
        @keyframes textFloat {
            0% {
                transform: translateY(15px);
                opacity: 0;
            }
            100% {
                transform: translateY(0);
                opacity: 1;
            }
        }

        @keyframes scrollHorizontal {
            0% {
                transform: translateX(-8px);
            }
            100% {
                transform: translateX(8px);
            }
        }

        /* Form elements styling */
        .form-check {
            margin: 8px 0;
            padding: 6px;
            background-color: rgba(58, 28, 0, 0.5);
            border-radius: 6px;
            display: flex;
            align-items: center;
            transition: all 0.2s ease;
            font-size: 0.85rem;
        }

        .form-check:hover {
            background-color: rgba(255, 140, 0, 0.1);
        }

        .form-check-input {
            margin-right: 8px;
            transform: scale(0.9);
        }

        .form-check-label {
            cursor: pointer;
            color: #fff5e6;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .command-icon {
            color: #ffaa33;
            width: 16px;
            text-align: center;
            font-size: 0.8rem;
        }

        .disable {
            color: #888;
            text-decoration: line-through;
        }

        .disable .command-icon {
            color: #888;
        }

        /* Matrix animation */
        .matrix-char {
            position: absolute;
            color: #ff8c00;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            opacity: 0.7;
            z-index: -1;
        }

        /* Status indicators */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            margin-left: 8px;
            font-size: 0.7rem;
            padding: 2px 6px;
            border-radius: 8px;
            background-color: rgba(255, 140, 0, 0.2);
        }

        /* Section icons */
        .section-icon {
            background-color: #ff8c00;
            width: 28px;
            height: 28px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #261000;
            font-size: 0.8rem;
        }

        /* Responsive adjustments */
        @media (max-width: 768px) {
            .container {
                padding: 1rem;
            }
            
            .banner {
                height: 120px;
            }
            
            .profile-pic {
                width: 50px;
                height: 50px;
                bottom: -25px;
            }
            
            .button-container {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 80%;
                text-align: center;
                justify-content: center;
            }
            
            .footer {
                flex-direction: column;
                gap: 8px;
            }
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,.3);
            border-radius: 50%;
            border-top-color: #ff8c00;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <canvas id="matrix"></canvas>
    
    <div class="header">
        <img src="https://media2.giphy.com/media/v1.Y2lkPTZjMDliOTUyZjRnaHlmZWhzZWxjbnh1NnZyM2pxaHdkY24wZ3Q2Nmtkem04MGtyYSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/EDRdYt04QK2d2/giphy.gif" alt="Banner" class="banner" />
        <img src="https://i.imgur.com/GSU0fOb.jpeg" alt="Profile" class="profile-pic" />
    </div>

    <div class="profile-container">
        <div class="profile-name">
            ùóØùóøùòÜ Û±¢è <i class="fas fa-check-circle verified-icon"></i>
            <span class="status-indicator"><i class="fas fa-circle" style="color: #4CAF50; font-size: 0.4rem;"></i> Online</span>
        </div>
        <a href="https://github.com/vernesg" class="github-link" target="_blank">
            <i class="fab fa-github"></i> github.com/unknown
        </a>
        <div class="warning">
            <i class="fas fa-exclamation-triangle warning-icon"></i>
            <span>Note: This automation tool is for educational purposes only. Using automated scripts on social platforms may violate terms of service. Always use responsibly and consider potential account restrictions. If you encounter issues, feel free to reach out for assistance.</span>
        </div>
    </div>

    <div class="button-container">
        <a href="https://www.facebook.com/vrn.esg404" target="_blank" class="btn">
            <i class="fas fa-user"></i> View profile
        </a>
        <a href="https://vern-phi.vercel.app/" target="_blank" class="btn btn-secondary">
            <i class="fas fa-external-link-alt"></i> View page
        </a>
    </div>

    <div class="container">
        <h2 class="subtitle">
            <span class="section-icon"><i class="fas fa-code"></i></span>
            Facebook Appstate
        </h2>
        <form id="json-form" onsubmit="submitForm(event)">
            <div class="input-with-icon">
                <textarea id="json-data" placeholder="Paste your appstate here"></textarea>
                <i class="fas fa-paste input-icon"></i>
            </div>
        </form>

        <div id="listOfCommands">
            <h2 class="subtitle">
                <span class="section-icon"><i class="fas fa-terminal"></i></span>
                Select your commands
            </h2>
            <button class="btn" onclick="selectAllCommands()">
                <i class="fas fa-check-double"></i> Select all commands
            </button>
        </div>

        <div id="listOfCommandsEvent">
            <h2 class="subtitle">
                <span class="section-icon"><i class="fas fa-bolt"></i></span>
                Select your event commands
            </h2>
            <button class="btn" onclick="selectAllEvents()">
                <i class="fas fa-check-double"></i> Select all events
            </button>
        </div>

        <div id="prefixOfCommands">
            <h2 class="subtitle">
                <span class="section-icon"><i class="fas fa-hashtag"></i></span>
                Enter prefix (important)
            </h2>
            <div class="input-with-icon">
                <input type="text" id="inputOfPrefix" placeholder="e.g. ! or ." />
                <i class="fas fa-keyboard input-icon"></i>
            </div>
        </div>

        <div id="adminOfCommands">
            <h2 class="subtitle">
                <span class="section-icon"><i class="fas fa-user-shield"></i></span>
                Enter UID (important)
            </h2>
            <div class="input-with-icon">
                <input type="text" id="inputOfAdmin" placeholder="Your Facebook UID" />
                <i class="fas fa-id-card input-icon"></i>
            </div>
        </div>

        <label class="terms-check">
            <input type="checkbox" id="agreeCheckbox" /> 
            <i class="fas fa-file-contract"></i> I have read and agree to the Terms and Conditions.
        </label>

        <div class="text-center">
            <button class="btn submit-btn" onclick="State()" disabled id="submitButton">
                <i class="fas fa-paper-plane"></i> Submit
            </button>
        </div>
    </div>

    <div id="audio-container" style="display:none;"></div>

    <div id="result" class="container text-center" style="display: none;"></div>

    <footer class="footer">
        <div class="footer-item">
            <i class="far fa-clock"></i>
            <span>Time: <span id="time"></span></span>
        </div>
        <div class="footer-item">
            <i class="fas fa-signal"></i>
            <span>Ping: <span id="ping"></span></span>
        </div>
    </footer>

    <script>
        // Matrix animation
        const canvas = document.getElementById('matrix');
        const ctx = canvas.getContext('2d');
        
        // Set canvas size
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        
        // Matrix characters
        const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789$+-*/=%\"'#&_(),.;:?!\\|{}<>[]^~";
        const charArray = chars.split('');
        
        const fontSize = 12;
        const columns = canvas.width / fontSize;
        
        // Array of drops - one per column
        const drops = [];
        for (let x = 0; x < columns; x++) {
            drops[x] = 1;
        }
        
        // Drawing function
        function draw() {
            // Semi-transparent black background for trail effect
            ctx.fillStyle = 'rgba(38, 16, 0, 0.05)';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            ctx.fillStyle = '#ff8c00'; // Matrix orange
            ctx.font = fontSize + 'px monospace';
            
            // Loop through drops
            for (let i = 0; i < drops.length; i++) {
                // Random character
                const text = charArray[Math.floor(Math.random() * charArray.length)];
                
                // Draw character
                ctx.fillText(text, i * fontSize, drops[i] * fontSize);
                
                // Move drop down
                drops[i]++;
                
                // If drop reached bottom, send it back to top randomly
                if (drops[i] * fontSize > canvas.height && Math.random() > 0.975) {
                    drops[i] = 0;
                }
            }
        }
        
        // Animation loop
        setInterval(draw, 33);
        
        // Resize canvas when window is resized
        window.addEventListener('resize', function() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
        
        // ORIGINAL JAVASCRIPT CODE (UNCHANGED)
        document.getElementById('agreeCheckbox').addEventListener('change', function() {
          document.getElementById('submitButton').disabled = !this.checked;
        });
        let Commands = [{
          'commands': []
        }, {
          'handleEvent': []
        }];
        function showAds() {
          var ads = [
            ''

          ];
          var index = Math.floor(Math.random() * ads.length);
          window.location.href = ads[index];
        }

        function measurePing() {
          var xhr = new XMLHttpRequest();
          var startTime, endTime;
          xhr.onreadystatechange = function() {
            if (xhr.readyState === 4) {
              endTime = Date.now();
              var pingTime = endTime - startTime;
              document.getElementById("ping").textContent = pingTime + " ms";
            }
          };
          xhr.open("GET", location.href + "?t=" + new Date().getTime());
          startTime = Date.now();
          xhr.send();
        }
        setInterval(measurePing, 1000);

        function updateTime() {
          const now = new Date();
          const options = {
            timeZone: 'Asia/Manila',
            hour12: true,
            hour: 'numeric',
            minute: 'numeric',
            second: 'numeric'
          };
          const formattedTime = now.toLocaleString('en-US', options);
          document.getElementById('time').textContent = formattedTime;
        }
        updateTime();
        setInterval(updateTime, 1000);
        async function State() {
          const jsonInput = document.getElementById('json-data');
          const button = document.getElementById('submitButton');
          if (!Commands[0].commands.length) {
            return showResult('Please provide at least one valid command for execution.');
          }
          try {
            button.style.display = 'none';
            const State = JSON.parse(jsonInput.value);
            if (State && typeof State === 'object') {
              const response = await fetch('/login', {
                method: 'POST',
                headers: {
                  'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                  state: State,
                  commands: Commands,
                  prefix: document.getElementById('inputOfPrefix').value,
                  admin: document.getElementById('inputOfAdmin').value,
                }),
              });
              const data = await response.json();
              if (data.success) {
                jsonInput.value = '';
                showResult(data.message);
                showAds();
              } else {
                jsonInput.value = '';
                showResult(data.message);
                showAds();
              }
            } else {
              jsonInput.value = '';
              showResult('Invalid JSON data. Please check your input.');
              showAds();
            }
          } catch (parseError) {
            jsonInput.value = '';
            console.error('Error parsing JSON:', parseError);
            showResult('Error parsing JSON. Please check your input.');
            showAds();
          } finally {
            setTimeout(() => {
              button.style.display = 'block';
            }, 4000);
          }
        }

        function showResult(message) {
          const resultContainer = document.getElementById('result');
          resultContainer.innerHTML = `<h5>${message}</h5>`;
          resultContainer.style.display = 'block';
        }
        async function commandList() {
          try {
            const [listOfCommands, listOfCommandsEvent] = [document.getElementById('listOfCommands'), document.getElementById('listOfCommandsEvent')];
            const response = await fetch('/commands');
            const {
              commands,
              handleEvent,
              aliases
            } = await response.json();
            [commands, handleEvent].forEach((command, i) => {
              command.forEach((command, index) => {
                const container = createCommand(i === 0 ? listOfCommands : listOfCommandsEvent, index + 1, command, i === 0 ? 'commands' : 'handleEvent', aliases[index] || []);
                i === 0 ? listOfCommands.appendChild(container) : listOfCommandsEvent.appendChild(container);
              });
            });
          } catch (error) {
            console.log(error);
          }
        }

        function createCommand(element, order, command, type, aliases) {
          const container = document.createElement('div');
          container.classList.add('form-check', 'form-switch');
          container.onclick = toggleCheckbox;
          const checkbox = document.createElement('input');
          checkbox.classList.add('form-check-input', type === 'handleEvent' ? 'handleEvent' : 'commands');
          checkbox.type = 'checkbox';
          checkbox.role = 'switch';
          checkbox.id = `flexSwitchCheck_${order}`;
          const label = document.createElement('label');
          label.classList.add('form-check-label', type === 'handleEvent' ? 'handleEvent' : 'commands');
          label.for = `flexSwitchCheck_${order}`;
          
          // Add icon based on command type
          let iconClass = 'fas fa-code';
          if (command.includes('admin') || command.includes('owner')) iconClass = 'fas fa-user-shield';
          else if (command.includes('help')) iconClass = 'fas fa-question-circle';
          else if (command.includes('search')) iconClass = 'fas fa-search';
          else if (command.includes('music') || command.includes('song')) iconClass = 'fas fa-music';
          else if (command.includes('game')) iconClass = 'fas fa-gamepad';
          else if (command.includes('image') || command.includes('pic')) iconClass = 'fas fa-image';
          else if (command.includes('weather')) iconClass = 'fas fa-cloud-sun';
          else if (command.includes('time')) iconClass = 'fas fa-clock';
          else if (command.includes('calc')) iconClass = 'fas fa-calculator';
          
          label.innerHTML = `<span class="command-icon"><i class="${iconClass}"></i></span> ${order}. ${command}`;
          container.appendChild(checkbox);
          container.appendChild(label);
          /*
          if (aliases.length > 0 && type !== 'handleEvent') {
            const aliasText = document.createElement('span');
            aliasText.classList.add('aliases');
            aliasText.textContent = ` (${aliases.join(', ')})`;
            label.appendChild(aliasText);
          }
          */
          return container;
        }

        function toggleCheckbox() {
          const box = [{
            input: '.form-check-input.commands',
            label: '.form-check-label.commands',
            array: Commands[0].commands
          }, {
            input: '.form-check-input.handleEvent',
            label: '.form-check-label.handleEvent',
            array: Commands[1].handleEvent
          }];
          box.forEach(({
            input,
            label,
            array
          }) => {
            const checkbox = this.querySelector(input);
            const labelText = this.querySelector(label);
            if (checkbox) {
              checkbox.checked = !checkbox.checked;
              if (checkbox.checked) {
                labelText.classList.add('disable');
                const command = labelText.textContent.replace(/^\d+\.\s/, '').split(" ")[0];
                array.push(command);
              } else {
                labelText.classList.remove('disable');
                const command = labelText.textContent.replace(/^\d+\.\s/, '').split(" ")[0];
                const removeCommand = array.indexOf(command);
                if (removeCommand !== -1) {
                  array.splice(removeCommand, 1);
                }
              }
            }
          });
        }

        function selectAllCommands() {
          const box = [{
            input: '.form-check-input.commands',
            array: Commands[0].commands
          }];
          box.forEach(({
            input,
            array
          }) => {
            const checkboxes = document.querySelectorAll(input);
            const allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);
            checkboxes.forEach((checkbox) => {
              if (allChecked) {
                checkbox.checked = false;
                const labelText = checkbox.nextElementSibling;
                labelText.classList.remove('disable');
                const command = labelText.textContent.replace(/^\d+\.\s/, '').split(" ")[0];
                const removeCommand = array.indexOf(command);
                if (removeCommand !== -1) {
                  array.splice(removeCommand, 1);
                }
              } else {
                checkbox.checked = true;
                const labelText = checkbox.nextElementSibling;
                labelText.classList.add('disable');
                const command = labelText.textContent.replace(/^\d+\.\s/, '').split(" ")[0];
                if (!array.includes(command)) {
                  array.push(command);
                }
              }
            });
          });
        }

        function selectAllEvents() {
          const box = [{
            input: '.form-check-input.handleEvent',
            array: Commands[1].handleEvent
          }];
          box.forEach(({
            input,
            array
          }) => {
            const checkboxes = document.querySelectorAll(input);
            const allChecked = Array.from(checkboxes).every(checkbox => checkbox.checked);
            checkboxes.forEach((checkbox) => {
              if (allChecked) {
                checkbox.checked = false;
                const labelText = checkbox.nextElementSibling;
                labelText.classList.remove('disable');
                const event = labelText.textContent.replace(/^\d+\.\s/, '').split(" ")[0];
                const removeEvent = array.indexOf(event);
                if (removeEvent !== -1) {
                  array.splice(removeEvent, 1);
                }
              } else {
                checkbox.checked = true;
                const labelText = checkbox.nextElementSibling;
                labelText.classList.add('disable');
                const event = labelText.textContent.replace(/^\d+\.\s/, '').split(" ")[0];
                if (!array.includes(event)) {
                  array.push(event);
                }
              }
            });
          });
        }
        commandList();

        // Audio functionality
        let audioStarted = false;
        document.addEventListener("click", function () {
            if (!audioStarted) {
                const iframe = document.createElement("iframe");
                iframe.width = "1";
                iframe.height = "1";
                iframe.src = "https://www.youtube.com/embed/JdU0gDDCiB8?autoplay=1&controls=0&showinfo=0&modestbranding=1&rel=0&iv_load_policy=3";
                iframe.frameBorder = "0";
                iframe.allow = "autoplay; encrypted-media";
                iframe.allowFullscreen = true;
                iframe.style.opacity = "0";
                iframe.style.position = "absolute";
                iframe.style.left = "-9999px";
                document.getElementById("audio-container").appendChild(iframe);
                audioStarted = true;
            }
        });
    </script>
</body>
</html>
